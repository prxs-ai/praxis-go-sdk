<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="CLASS" height="699px" preserveAspectRatio="none" style="width:297px;height:699px;background:#FFFFFF;" version="1.1" viewBox="0 0 297 699" width="297px" zoomAndPan="magnify"><defs/><g><!--class Tool--><g class="entity" data-entity="Tool" data-source-line="3" data-uid="ent0002" id="entity_Tool"><rect fill="#FFFFFF" height="78.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="207.627" x="47.22" y="373.1"/><ellipse cx="132.552" cy="387.1" fill="#FFFFFF" rx="9" ry="9" style="stroke:#000000;stroke-width:1;"/><path d="M128.9798,383.3651 L128.9798,381.2069 L136.3592,381.2069 L136.3592,383.3651 L133.8938,383.3651 L133.8938,391.4418 L136.3592,391.4418 L136.3592,393.6 L128.9798,393.6 L128.9798,391.4418 L131.4451,391.4418 L131.4451,383.3651 Z " fill="#000000"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="29.4629" x="150.052" y="392.6679">Tool</text><line style="stroke:#000000;stroke-width:1;" x1="48.22" x2="253.847" y1="401.1" y2="401.1"/><line style="stroke:#000000;stroke-width:1;" x1="48.22" x2="253.847" y1="409.1" y2="409.1"/><ellipse cx="58.22" cy="423.1073" fill="#FFFFFF" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="183.627" x="65.22" y="427.1752">GetTool(): mcpTypes.Tool</text><ellipse cx="58.22" cy="440.122" fill="#FFFFFF" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="176.3945" x="65.22" y="444.1898">Handler(ctx, req): Result</text></g><!--class FilesystemTools--><g class="entity" data-entity="FilesystemTools" data-source-line="8" data-uid="ent0003" id="entity_FilesystemTools"><rect fill="#FFFFFF" height="180.1172" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="261.9795" x="20.05" y="512.13"/><ellipse cx="91.7033" cy="526.13" fill="#FFFFFF" rx="9" ry="9" style="stroke:#000000;stroke-width:1;"/><path d="M94.1765,532.2731 Q93.5954,532.5719 92.9563,532.7213 Q92.3171,532.8707 91.6115,532.8707 Q89.1047,532.8707 87.7849,531.2189 Q86.465,529.567 86.465,526.4459 Q86.465,523.3165 87.7849,521.6647 Q89.1047,520.0128 91.6115,520.0128 Q92.3171,520.0128 92.9646,520.1622 Q93.612,520.3116 94.1765,520.6105 L94.1765,523.3331 Q93.5456,522.7521 92.9521,522.4823 Q92.3586,522.2125 91.7277,522.2125 Q90.383,522.2125 89.6982,523.2792 Q89.0134,524.3458 89.0134,526.4459 Q89.0134,528.5377 89.6982,529.6044 Q90.383,530.671 91.7277,530.671 Q92.3586,530.671 92.9521,530.4012 Q93.5456,530.1315 94.1765,529.5504 Z " fill="#000000"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="111.1729" x="109.2033" y="531.6979">FilesystemTools</text><line style="stroke:#000000;stroke-width:1;" x1="21.05" x2="281.0295" y1="540.13" y2="540.13"/><rect fill="none" height="6" style="stroke:#000000;stroke-width:1;" width="6" x="28.05" y="551.1373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="104.8564" x="38.05" y="558.2052">baseDir: string</text><rect fill="none" height="6" style="stroke:#000000;stroke-width:1;" width="6" x="28.05" y="568.152"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="103.4277" x="38.05" y="575.2198">logger: Logger</text><line style="stroke:#000000;stroke-width:1;" x1="21.05" x2="281.0295" y1="582.1593" y2="582.1593"/><ellipse cx="31.05" cy="596.1666" fill="#FFFFFF" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="169.2168" x="38.05" y="600.2345">GetWriteFileTool(): Tool</text><ellipse cx="31.05" cy="613.1813" fill="#FFFFFF" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="237.9795" x="38.05" y="617.2491">WriteFileHandler(ctx, req): Result</text><ellipse cx="31.05" cy="630.1959" fill="#FFFFFF" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="166.9063" x="38.05" y="634.2638">GetReadFileTool(): Tool</text><ellipse cx="31.05" cy="647.2106" fill="#FFFFFF" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="235.6689" x="38.05" y="651.2784">ReadFileHandler(ctx, req): Result</text><ellipse cx="31.05" cy="664.2252" fill="#FFFFFF" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="163.4404" x="38.05" y="668.2931">GetListFilesTool(): Tool</text><ellipse cx="31.05" cy="681.2399" fill="#FFFFFF" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="232.2031" x="38.05" y="685.3077">ListFilesHandler(ctx, req): Result</text></g><!--class MCPServer--><g class="entity" data-entity="MCPServer" data-source-line="19" data-uid="ent0004" id="entity_MCPServer"><rect fill="#FFFFFF" height="112.0586" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="255.4854" x="23.29" y="184.04"/><ellipse cx="109.0322" cy="198.04" fill="#FFFFFF" rx="9" ry="9" style="stroke:#000000;stroke-width:1;"/><path d="M111.5053,204.1831 Q110.9243,204.4819 110.2851,204.6313 Q109.646,204.7807 108.9404,204.7807 Q106.4336,204.7807 105.1137,203.1289 Q103.7939,201.477 103.7939,198.3559 Q103.7939,195.2265 105.1137,193.5747 Q106.4336,191.9228 108.9404,191.9228 Q109.646,191.9228 110.2934,192.0722 Q110.9409,192.2216 111.5053,192.5205 L111.5053,195.2431 Q110.8745,194.6621 110.281,194.3923 Q109.6875,194.1225 109.0566,194.1225 Q107.7119,194.1225 107.0271,195.1892 Q106.3422,196.2558 106.3422,198.3559 Q106.3422,200.4477 107.0271,201.5144 Q107.7119,202.581 109.0566,202.581 Q109.6875,202.581 110.281,202.3112 Q110.8745,202.0415 111.5053,201.4604 Z " fill="#000000"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="76.501" x="126.5322" y="203.6079">MCPServer</text><line style="stroke:#000000;stroke-width:1;" x1="24.29" x2="277.7754" y1="212.04" y2="212.04"/><rect fill="none" height="6" style="stroke:#000000;stroke-width:1;" width="6" x="31.29" y="223.0473"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="183.2646" x="41.29" y="230.1152">tools: map[string]Handler</text><line style="stroke:#000000;stroke-width:1;" x1="24.29" x2="277.7754" y1="237.0546" y2="237.0546"/><ellipse cx="34.29" cy="251.062" fill="#FFFFFF" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="158.5664" x="41.29" y="255.1298">AddTool(tool, handler)</text><ellipse cx="34.29" cy="268.0766" fill="#FFFFFF" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="231.4854" x="41.29" y="272.1445">FindToolHandler(name): Handler</text><ellipse cx="34.29" cy="285.0913" fill="#FFFFFF" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="148.4629" x="41.29" y="289.1591">HasTool(name): bool</text></g><!--class P2PMCPBridge--><g class="entity" data-entity="P2PMCPBridge" data-source-line="26" data-uid="ent0005" id="entity_P2PMCPBridge"><rect fill="#FFFFFF" height="95.0439" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="278.0713" x="12" y="12"/><ellipse cx="96.7852" cy="26" fill="#FFFFFF" rx="9" ry="9" style="stroke:#000000;stroke-width:1;"/><path d="M99.2583,32.1431 Q98.6772,32.4419 98.0381,32.5913 Q97.3989,32.7407 96.6934,32.7407 Q94.1865,32.7407 92.8667,31.0889 Q91.5469,29.437 91.5469,26.3159 Q91.5469,23.1865 92.8667,21.5347 Q94.1865,19.8828 96.6934,19.8828 Q97.3989,19.8828 98.0464,20.0322 Q98.6938,20.1816 99.2583,20.4805 L99.2583,23.2031 Q98.6274,22.6221 98.0339,22.3523 Q97.4404,22.0825 96.8096,22.0825 Q95.4648,22.0825 94.78,23.1492 Q94.0952,24.2158 94.0952,26.3159 Q94.0952,28.4077 94.78,29.4744 Q95.4648,30.541 96.8096,30.541 Q97.4404,30.541 98.0339,30.2712 Q98.6274,30.0015 99.2583,29.4204 Z " fill="#000000"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="101.001" x="114.2852" y="31.5679">P2PMCPBridge</text><line style="stroke:#000000;stroke-width:1;" x1="13" x2="289.0713" y1="40" y2="40"/><rect fill="none" height="6" style="stroke:#000000;stroke-width:1;" width="6" x="20" y="51.0073"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="163.8984" x="30" y="58.0752">mcpServer: MCPServer</text><line style="stroke:#000000;stroke-width:1;" x1="13" x2="289.0713" y1="65.0146" y2="65.0146"/><ellipse cx="23" cy="79.022" fill="#FFFFFF" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="254.0713" x="30" y="83.0898">ProcessMCPRequest(req): Response</text><ellipse cx="23" cy="96.0366" fill="#FFFFFF" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="247.584" x="30" y="100.1045">handleCallTool(ctx, req): Response</text></g><!--reverse link Tool to FilesystemTools--><g class="link" data-entity-1="Tool" data-entity-2="FilesystemTools" data-source-line="32" data-uid="lnk6" id="link_Tool_FilesystemTools"><path codeLine="32" d="M151.04,469.63 C151.04,487.15 151.04,490.67 151.04,511.87" fill="none" id="Tool-backto-FilesystemTools" style="stroke:#000000;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="none" points="151.04,451.63,145.04,469.63,157.04,469.63,151.04,451.63" style="stroke:#000000;stroke-width:1;"/></g><!--link MCPServer to Tool--><g class="link" data-entity-1="MCPServer" data-entity-2="Tool" data-source-line="33" data-uid="lnk7" id="link_MCPServer_Tool"><path codeLine="33" d="M151.04,296.28 C151.04,321.3 151.04,344.27 151.04,366.85" fill="none" id="MCPServer-to-Tool" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="151.04,372.85,155.04,363.85,151.04,367.85,147.04,363.85,151.04,372.85" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="59.103" x="152.04" y="340.1698">manages</text></g><!--link P2PMCPBridge to MCPServer--><g class="link" data-entity-1="P2PMCPBridge" data-entity-2="MCPServer" data-source-line="34" data-uid="lnk8" id="link_P2PMCPBridge_MCPServer"><path codeLine="34" d="M151.04,107.44 C151.04,130.79 151.04,153.17 151.04,177.6" fill="none" id="P2PMCPBridge-to-MCPServer" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="151.04,183.6,155.04,174.6,151.04,178.6,147.04,174.6,151.04,183.6" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="29.5166" x="152.04" y="151.1098">uses</text></g><!--SRC=[ZLBBJiCm4BpxAymj5KqE72E414MbXo95eH87nC5DbjIIuwHU1r41_uxNpeDM83X5tfcTcTticTr13RnLGch6fBPWNaG1VDCqYhyppi_lmD8ZcgMyBjhDeGLCg43OIkXIWOaA-pRd1lQEamDsoh9FnWeb4FbIAi03MgYf2Rrcl1K8jzAa7AsHkgAIQgeAN6Njlxtnev4MI658C1YFmEy9Wa8Eeln9OAZ_rR-MQFq8fm8Zy8yTt2-o1p2lOCBqbXRXjYdQfp3_Swz1kjTbwQs8DEUx0Cm8MKhjeS5GYngSsRVUbGWnUsHBKSSGsKNcSjmOMLOGShZV6MAbKqAIoKnJ0AAhvR3l06qqZjKs6e4u8TX2AEKTZuSFBEVih-Zo8qbEpu1DAudZgt1jj14jAa1s59NmYPto3XtZ2m00]--></g></svg>
