@startuml
!theme plain

participant "DSL Analyzer" as DSL
participant "Agent 1 Core" as Core1
participant "P2P Protocol" as P2P
participant "Agent 2" as A2
participant "Tool" as Tool

DSL -> Core1: executeCall("tool_name", args)
Core1 -> Core1: HasLocalTool("tool_name")
note right: Returns false
Core1 -> Core1: FindAgentWithTool("tool_name")
note right: Returns Agent2 PeerID
Core1 -> P2P: InvokeTool(peerID, "tool_name", args)
P2P -> A2: P2P Stream Request
A2 -> Tool: Execute tool
Tool --> A2: Result
A2 --> P2P: P2P Stream Response
P2P --> Core1: Result
Core1 --> DSL: Result

@enduml
