@startuml
title Tool Execution Decision Tree

start

:Receive Tool Request;

if (Local Tool Available?) then (Yes)
  :Get local tool handler;
  :Execute tool handler;
  :Return result;
else (No)
  :Search peer registry;
  if (Found peer with tool?) then (Yes)
    :Get peer connection;
    if (Peer connected?) then (Yes)
      :Send P2P tool request;
      :Wait for response;
      :Return remote result;
    else (No)
      :Attempt connection;
      if (Connection successful?) then (Yes)
        :Exchange A2A cards;
        :Send P2P tool request;
        :Return remote result;
      else (No)
        :Return connection error;
      endif
    endif
  else (No)
    :Return Tool not found;
  endif
endif

stop

@enduml
