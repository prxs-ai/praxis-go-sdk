@startuml
!theme plain

start
:Receive Tool Request;

if (Local Tool?) then (yes)
  :Get Tool Handler;
  :Execute Handler;
  :Return Result;
else (no)
  :Find Peer with Tool;
  if (Peer Found?) then (yes)
    :Open P2P Stream;
    :Send Tool Request;
    :Receive Response;
    :Return Result;
  else (no)
    :Return Error;
  endif
endif

stop

@enduml